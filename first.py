import streamlit as st
import pandas as pd
import numpy as np

# ---------------------- é¡µé¢é…ç½® ----------------------
st.set_page_config(
    page_title="å—å®ç¾é£Ÿæ¢ç´¢",
    page_icon="ğŸœ",
)

# ---------------------- æ ‡é¢˜ä¸ä»‹ç» ----------------------
st.title("ğŸ” å—å®ç¾é£Ÿæ¢ç´¢")
st.markdown("æ¢ç´¢å¹¿è¥¿å—å®æœ€å—æ¬¢è¿çš„ç¾é£Ÿåœ°ç‚¹ï¼é€‰æ‹©ä½ æ„Ÿå…´è¶£çš„é¤å…ç±»å‹ï¼ŒæŸ¥çœ‹è¯„åˆ†å’Œä½ç½®ã€‚")


# ---------------------- 1. å—å®ç¾é£Ÿåœ°å›¾ï¼ˆmapç»„ä»¶ï¼‰ ----------------------
st.subheader("ğŸ“ å—å®ç¾é£Ÿåœ°å›¾")
# æ„é€ 5å®¶é¤å…çš„ç»çº¬åº¦æ•°æ®ï¼ˆå—å®åŒºåŸŸï¼‰
map_data = pd.DataFrame({
    "latitude": [22.823555, 22.812116, 22.813655, 22.814418, 22.805077],  # å—å®çº¬åº¦èŒƒå›´
    "longitude": [108.342463, 108.392014, 108.423043, 108.390838, 108.368414],  # å—å®ç»åº¦èŒƒå›´
    "é¤å…åç§°": ["æ¡‚æ—è‚¥ä»”Â·ä¸­åé¤é¥®ååº—ï¼ˆæ˜Ÿå…‰å¤§é“åº—ï¼‰", "æ¡‚å°å¨å¹¿è¥¿èœï¼ˆä¸‡è±¡åŸåº—ï¼‰", "æ¨ªå·é±¼ç”Ÿé¦†ï¼ˆçˆ±ç´æµ·åº—ï¼‰", "ç”˜å®¶ç•ŒæŸ æª¬é¸­ï¼ˆæ˜¥æ™–åº—ï¼‰", "å•«å•«æ‘ ç”Ÿæ–™å•«å•«ç…²ï¼ˆç…è¥¿åº—ï¼‰"]
})
st.map(map_data, use_container_width=True)


# ---------------------- 2. é¤å…è¯„åˆ†ï¼ˆbar_chartç»„ä»¶ï¼‰ ----------------------
st.subheader("â­ é¤å…è¯„åˆ†")
# 5å®¶é¤å…çš„è¯„åˆ†æ•°æ®
score_data = pd.DataFrame({
    "é¤å…åç§°": ["æ¡‚æ—è‚¥ä»”Â·ä¸­åé¤é¥®ååº—ï¼ˆæ˜Ÿå…‰å¤§é“åº—ï¼‰", "æ¡‚å°å¨å¹¿è¥¿èœï¼ˆä¸‡è±¡åŸåº—ï¼‰", "æ¨ªå·é±¼ç”Ÿé¦†ï¼ˆçˆ±ç´æµ·åº—ï¼‰", "ç”˜å®¶ç•ŒæŸ æª¬é¸­ï¼ˆæ˜¥æ™–åº—ï¼‰", "å•«å•«æ‘ ç”Ÿæ–™å•«å•«ç…²ï¼ˆç…è¥¿åº—ï¼‰"],
    "è¯„åˆ†": [4.0, 4.5, 4.2, 4.7, 4.3]
}).set_index("é¤å…åç§°")
st.bar_chart(score_data, use_container_width=True)


# ---------------------- 3. ä¸åŒç±»å‹é¤å…ä»·æ ¼ï¼ˆarea_chartç»„ä»¶ï¼‰ ----------------------
st.subheader("ğŸ’° ä¸åŒç±»å‹é¤å…ä»·æ ¼")
# 5ç±»é¤å…çš„äººå‡æ¶ˆè´¹æ•°æ®
price_data = pd.DataFrame({
    "é¤å…ç±»å‹": ["è€å‹ç²‰åº—", "ç²‰é¢å°åƒ", "èŒ¶é¤å…", "ç‰¹è‰²èœ", "å¿«é¤"],
    "äººå‡æ¶ˆè´¹(å…ƒ)": [25, 18, 50, 60, 15]
}).set_index("é¤å…ç±»å‹")
st.area_chart(price_data, use_container_width=True)


# ---------------------- 4. 5å®¶é¤å…12ä¸ªæœˆä»·æ ¼èµ°åŠ¿ï¼ˆline_chartç»„ä»¶ï¼‰ ----------------------
st.subheader("ğŸ“ˆ 5å®¶é¤å…12ä¸ªæœˆä»·æ ¼èµ°åŠ¿")
# æ„é€ 12ä¸ªæœˆï¼ˆ1-12æœˆï¼‰+5å®¶é¤å…çš„ä»·æ ¼æ•°æ®
months = [f"{i}æœˆ" for i in range(1, 13)]
price_trend_data = pd.DataFrame({
    "æœˆä»½": months,
    "æ¡‚æ—è‚¥ä»”Â·ä¸­åé¤é¥®ååº—ï¼ˆæ˜Ÿå…‰å¤§é“åº—ï¼‰": np.random.randint(48, 70, size=12),  # ä»·æ ¼å°å¹…æ³¢åŠ¨
    "æ¡‚å°å¨å¹¿è¥¿èœï¼ˆä¸‡è±¡åŸåº—ï¼‰": np.random.randint(75, 103, size=12),
    "æ¨ªå·é±¼ç”Ÿé¦†ï¼ˆçˆ±ç´æµ·åº—ï¼‰": np.random.randint(64, 95, size=12),
    "ç”˜å®¶ç•ŒæŸ æª¬é¸­ï¼ˆæ˜¥æ™–åº—ï¼‰": np.random.randint(49, 83, size=12),
    "å•«å•«æ‘ ç”Ÿæ–™å•«å•«ç…²ï¼ˆç…è¥¿åº—ï¼‰": np.random.randint(38, 65, size=12)
}).set_index("æœˆä»½")
st.line_chart(price_trend_data, use_container_width=True)

# ---------------------- 5. 5å®¶é¤å…12ä¸ªæœˆæœˆå‡äººæµé‡ ----------------------
flow_data = pd.DataFrame({
    "æœˆä»½": months,
    "æ¡‚æ—è‚¥ä»”Â·ä¸­åé¤é¥®ååº—ï¼ˆæ˜Ÿå…‰å¤§é“åº—ï¼‰": np.random.randint(1800, 3500, size=12),  
    "æ¡‚å°å¨å¹¿è¥¿èœï¼ˆä¸‡è±¡åŸåº—ï¼‰": np.random.randint(1500, 3000, size=12),
    "æ¨ªå·é±¼ç”Ÿé¦†ï¼ˆçˆ±ç´æµ·åº—ï¼‰": np.random.randint(800, 2000, size=12),   
    "ç”˜å®¶ç•ŒæŸ æª¬é¸­ï¼ˆæ˜¥æ™–åº—ï¼‰": np.random.randint(2000, 4000, size=12),   
    "å•«å•«æ‘ ç”Ÿæ–™å•«å•«ç…²ï¼ˆç…è¥¿åº—ï¼‰": np.random.randint(2800, 4800, size=12)
}).set_index("æœˆä»½")
st.subheader("ğŸ‘¥ 5å®¶é¤å…12ä¸ªæœˆæœˆå‡äººæµé‡ï¼ˆäººæ¬¡ï¼‰")
st.area_chart(flow_data, use_container_width=True, color=["#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4", "#FECA57"])

# ---------------------- 6. é¤å…è¯¦æƒ…ï¼ˆä¸‹æ‹‰é€‰æ‹©ï¼‰ ----------------------
st.subheader("ğŸ  é¤å…è¯¦æƒ…")
selected_restaurant = st.selectbox("é€‰æ‹©é¤å…æŸ¥çœ‹è¯¦æƒ…", map_data["é¤å…åç§°"].tolist())

# æ¨¡æ‹Ÿé¤å…è¯¦æƒ…æ•°æ®
restaurant_detail = {
    "æ¡‚æ—è‚¥ä»”Â·ä¸­åé¤é¥®ååº—ï¼ˆæ˜Ÿå…‰å¤§é“åº—ï¼‰": {
        "è¯„åˆ†": "4.0/5.0",
        "äººå‡æ¶ˆè´¹": "65å…ƒ",
        "æ¨èèœå“": ["ç³–é†‹æ’éª¨", "å•¤é…’é±¼", "ç™½åˆ‡é¸¡"],
        "æ‹¥æŒ¤ç¨‹åº¦": "80% æ‹¥æŒ¤"
    },
    "æ¡‚å°å¨å¹¿è¥¿èœï¼ˆä¸‡è±¡åŸåº—ï¼‰": {
        "è¯„åˆ†": "4.5/5.0",
        "äººå‡æ¶ˆè´¹": "98å…ƒ",
        "æ¨èèœå“": ["è€å‹é±¼", "è„†çš®å°åˆ€é¸­", "å·´é©¬é»‘è±†è±†è…"],
        "æ‹¥æŒ¤ç¨‹åº¦": "60% æ‹¥æŒ¤"
    },
    "æ¨ªå·é±¼ç”Ÿé¦†ï¼ˆçˆ±ç´æµ·åº—ï¼‰": {
        "è¯„åˆ†": "4.2/5.0",
        "äººå‡æ¶ˆè´¹": "75å…ƒ",
        "æ¨èèœå“": ["æ–°é²œé±¼ç”Ÿ"],
        "æ‹¥æŒ¤ç¨‹åº¦": "70% æ‹¥æŒ¤"
    },
    "ç”˜å®¶ç•ŒæŸ æª¬é¸­ï¼ˆæ˜¥æ™–åº—ï¼‰": {
        "è¯„åˆ†": "4.7/5.0",
        "äººå‡æ¶ˆè´¹": "60å…ƒ",
        "æ¨èèœå“": ["æŸ æª¬é¸­", "é…¸ç¬‹ç‚’ç‰›è‚‰", "çŒªè¡€ç‚’é¥­"],
        "æ‹¥æŒ¤ç¨‹åº¦": "90% æ‹¥æŒ¤"
    },
    "å•«å•«æ‘ ç”Ÿæ–™å•«å•«ç…²ï¼ˆç…è¥¿åº—ï¼‰": {
        "è¯„åˆ†": "4.3/5.0",
        "äººå‡æ¶ˆè´¹": "42å…ƒ",
        "æ¨èèœå“": ["çŒªæ‚å•«å•«ç…²", "é»‘æ¤’ç‰›è‚‰å•«å•«ç…²", "é²œé±¿å•«å•«ç…²"],
        "æ‹¥æŒ¤ç¨‹åº¦": "99% æ‹¥æŒ¤"
    }
}

# å±•ç¤ºé€‰ä¸­é¤å…çš„è¯¦æƒ…
detail = restaurant_detail[selected_restaurant]
col1, col2 = st.columns(2)
with col1:
    st.write(f"**{selected_restaurant}**")
    st.write(f"è¯„åˆ†ï¼š{detail['è¯„åˆ†']}")
    st.write(f"äººå‡æ¶ˆè´¹ï¼š{detail['äººå‡æ¶ˆè´¹']}")
    st.write(f"å½“å‰æ‹¥æŒ¤ç¨‹åº¦ï¼š{detail['æ‹¥æŒ¤ç¨‹åº¦']}")
with col2:
    st.write("**æ¨èèœå“**")
    for dish in detail["æ¨èèœå“"]:
        st.write(f"- {dish}")
